<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Standing Rock Environmental</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.css" rel="stylesheet" />
    {% load static %}
    <script src="{% static 'js/statistics.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/maptabs.css' %}">
    <link rel="stylesheet" href="{% static 'css/map.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/Heading.css' %}">
    {% include "HTML/navbar.html" %}

</head>
<body>
<style>
  #map { top: 20%; left: 10%; width: 80%; height: 70%}

  .modal {
  position: relative;
  top: 100vh; /* Position modal 100% from the top */
  left: 20%; /* Align modal with the left side of the screen */
  z-index: auto;
  display: none;
  width: 60%; /* Set modal width to 60% of the page */
  overflow-y: visible; /* Enable vertical scrolling if content exceeds modal height */
  padding: 20px;
  max-height: 400%; /* Set maximum height for modal */
  background-color: #fefefe;
  border: 1px solid #888;
  }
  .modal-content {
  width: 100%;
  max-width: 95%; /* Set maximum width for content within modal */
  margin: 0 auto; /* Center content horizontally */
  }

  @media screen and (max-width: 768px) {
    #map-legend {
      display: none;
    }
    
    .modal {
      position: relative;
      top: 0;
      left: 0;
      width: 100%;
      padding: 15px;
      max-height: none;
      overflow-y: auto;
    }
    
    .modal-content {
      max-width: 100%;
    }
  }
</style>
    <div id="map"></div>

    <!-- Legend -->
    <div id="map-legend">
      <h4>Legend</h4>
      <ul>
        <li><span class="dot" style="background-color: #140ceb;"></span>Dam</li>
        <li><span class="dot" style="background-color: #f91d1d;"></span>Gauge</li>
        <li><span class="dot" style="background-color: #057c37;"></span>Mesonet</li>
      </ul>
    </div>

    <!-- Hazen Modal -->
    <div id="Hazen" class="modal">
      <div class="modal-content"> 
        <span class="close">&times;</span>
      </div>
    </div>

    <!-- Stanton Modal -->
    <div id="Stanton" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>

<!-- Washburn Modal -->
<div id="Washburn" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
  </div>
</div>

<!-- Price Modal -->
<div id="Price" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
  </div>
</div>

<!-- Bismarck Modal -->
<div id="Bismarck" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
  </div>
</div>

<!-- Schmidt Modal -->
<div id="Schmidt" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
  </div>
</div>

<!-- Judson Modal -->
<div id="Judson" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>

  </div>
</div>

<!-- Mandan Modal -->
<div id="Mandan" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>

  </div>
</div>

<!-- Breien Modal -->
<div id="Breien" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>

  </div>
</div>

    <!-- Oahe Dam Modal -->
    <div id="Oahe" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br>

      </div>
    </div>
    
    <!-- Big Bend Modal -->
    <div id="BigBend" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br>
      </div>
    </div>
    
    <!-- Fort Randall Modal -->
    <div id="FortRandall" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br>
      </div>
    </div>
    
    <!-- Gavins Point Modal -->
    <div id="GavinsPoint" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br>
      </div>
    </div>
    
    <!-- Garrison Modal -->
    <div id="Garrison" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br>
      </div>
    </div>
    
    <!-- Fort Peck Modal -->
    <div id="FortPeck" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br>
      </div>
    </div>

    <!-- Fort Yates Modal -->
    <div id="FortYates" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br><br>
      </div>
    </div>
    
    <!-- Mott Modal -->
    <div id="Mott" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br><br>
      </div>
    </div>
    
    <!-- Carson Modal -->
    <div id="Carson" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br><br>

      </div>
    </div>
    
    <!-- Linton Modal -->
    <div id="Linton" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span><br><br>

      </div>
    </div>

    <!-- Cash Modal -->
    <div id="Cash" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- Wakpala Modal -->
    <div id="Wakpala" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- Whitehorse Modal -->
    <div id="Whitehorse" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
 
      </div>
    </div>
    
    <!-- Little Eagle Modal -->
    <div id="LittleEagle" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>

    <!-- Lemmon Modal -->
    <div id="Lemmon" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- McIntosh Modal -->
    <div id="McIntosh" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- Mclaughlin Modal -->
    <div id="Mclaughlin" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- Mound City Modal -->
    <div id="Mound City" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- Timber Lake Modal -->
    <div id="Timber Lake" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
      </div>
    </div>
    
    <!-- Close Button -->
    <span class="close">&times;</span>
    
    </div>
    </div>
    {% load static %}
    <script>
    // Provide base graphs static path and an injected mapping created server-side
    window.baseGraphUrl = "{% static 'graphs/' %}";
    window.graphMap = {{ graph_map_json|default:'{}'|safe }};
    </script>

      <script src="{% static 'js/map.js' %}"></script>
      <script src="{% static 'js/openModals.js' %}"></script>

      <!-- Auto-scroll to modal when it's displayed -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const modals = document.querySelectorAll('.modal');
          
          // Observe modal visibility changes
          const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
              if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                const modal = mutation.target;
                const displayStyle = window.getComputedStyle(modal).display;
                if (displayStyle !== 'none') {
                  // Scroll to modal when it becomes visible
                  modal.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
              }
            });
          });
          
          modals.forEach(modal => {
            observer.observe(modal, { attributes: true, attributeFilter: ['style'] });
          });
        });
      </script>

  </body>
</html>